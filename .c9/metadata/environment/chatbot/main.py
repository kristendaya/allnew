{"filter":false,"title":"main.py","tooltip":"/chatbot/main.py","undoManager":{"mark":21,"position":21,"stack":[[{"start":{"row":0,"column":0},"end":{"row":5,"column":1},"action":"insert","lines":["const chatBot = () => {","  // 유저의 질문을 담을 state","\tconst [questions, setQuestions] = useState<any>();","  // 채팅을 위한 state","    const [chat, setChat] = useState<any>([]);","}"],"id":31}],[{"start":{"row":0,"column":0},"end":{"row":4,"column":46},"action":"remove","lines":["const chatBot = () => {","  // 유저의 질문을 담을 state","\tconst [questions, setQuestions] = useState<any>();","  // 채팅을 위한 state","    const [chat, setChat] = useState<any>([]);"],"id":32}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"remove","lines":["}"],"id":33},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]},{"start":{"row":0,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["from fastapi import FastAPI","import openai","import os","","app = FastAPI()","","","@app.post(\"/chat/\")","async def chatbot_response(prompt: str):","    openai.api_key = os.getenv(\"OPENAI_API_KEY\")","    response = openai.Completion.create(","        engine=\"text-davinci-002\",","        prompt=prompt,","        temperature=0.7,","        max_tokens=150,","        top_p=1,","        frequency_penalty=0,","        presence_penalty=0,","    )","","    return {\"response\": response.choices[0].text.strip()}",""]}],[{"start":{"row":9,"column":45},"end":{"row":9,"column":46},"action":"remove","lines":["Y"],"id":34},{"start":{"row":9,"column":44},"end":{"row":9,"column":45},"action":"remove","lines":["E"]},{"start":{"row":9,"column":43},"end":{"row":9,"column":44},"action":"remove","lines":["K"]},{"start":{"row":9,"column":42},"end":{"row":9,"column":43},"action":"remove","lines":["_"]},{"start":{"row":9,"column":41},"end":{"row":9,"column":42},"action":"remove","lines":["I"]},{"start":{"row":9,"column":40},"end":{"row":9,"column":41},"action":"remove","lines":["P"]},{"start":{"row":9,"column":39},"end":{"row":9,"column":40},"action":"remove","lines":["A"]},{"start":{"row":9,"column":38},"end":{"row":9,"column":39},"action":"remove","lines":["_"]},{"start":{"row":9,"column":37},"end":{"row":9,"column":38},"action":"remove","lines":["I"]},{"start":{"row":9,"column":36},"end":{"row":9,"column":37},"action":"remove","lines":["A"]},{"start":{"row":9,"column":35},"end":{"row":9,"column":36},"action":"remove","lines":["N"]}],[{"start":{"row":9,"column":34},"end":{"row":9,"column":35},"action":"remove","lines":["E"],"id":35},{"start":{"row":9,"column":33},"end":{"row":9,"column":34},"action":"remove","lines":["P"]},{"start":{"row":9,"column":32},"end":{"row":9,"column":33},"action":"remove","lines":["O"]}],[{"start":{"row":9,"column":32},"end":{"row":9,"column":83},"action":"insert","lines":["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"],"id":36}],[{"start":{"row":0,"column":0},"end":{"row":20,"column":57},"action":"remove","lines":["from fastapi import FastAPI","import openai","import os","","app = FastAPI()","","","@app.post(\"/chat/\")","async def chatbot_response(prompt: str):","    openai.api_key = os.getenv(\"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\")","    response = openai.Completion.create(","        engine=\"text-davinci-002\",","        prompt=prompt,","        temperature=0.7,","        max_tokens=150,","        top_p=1,","        frequency_penalty=0,","        presence_penalty=0,","    )","","    return {\"response\": response.choices[0].text.strip()}"],"id":37},{"start":{"row":0,"column":0},"end":{"row":28,"column":59},"action":"insert","lines":["from fastapi import FastAPI, responses","import openai","import os","from fastapi.staticfiles import StaticFiles","from fastapi.responses import HTMLResponse","","app = FastAPI()","app.mount(\"/static\", StaticFiles(directory=\"static\"), name=\"static\")","","@app.post(\"/chat/\")","async def chatbot_response(prompt: str):","    openai.api_key = os.getenv(\"OPENAI_API_KEY\")","    response = openai.Completion.create(","        engine=\"text-davinci-002\",","        prompt=prompt,","        temperature=0.7,","        max_tokens=150,","        top_p=1,","        frequency_penalty=0,","        presence_penalty=0,","    )","","    return {\"response\": response.choices[0].text.strip()}","","@app.get(\"/\", response_class=HTMLResponse)","async def serve_homepage():","    with open(\"static/index.html\", \"r\") as f:","        html_text = f.read()","    return HTMLResponse(content=html_text, status_code=200)"]}],[{"start":{"row":11,"column":45},"end":{"row":11,"column":46},"action":"remove","lines":["Y"],"id":38},{"start":{"row":11,"column":44},"end":{"row":11,"column":45},"action":"remove","lines":["E"]},{"start":{"row":11,"column":43},"end":{"row":11,"column":44},"action":"remove","lines":["K"]},{"start":{"row":11,"column":42},"end":{"row":11,"column":43},"action":"remove","lines":["_"]},{"start":{"row":11,"column":41},"end":{"row":11,"column":42},"action":"remove","lines":["I"]},{"start":{"row":11,"column":40},"end":{"row":11,"column":41},"action":"remove","lines":["P"]},{"start":{"row":11,"column":39},"end":{"row":11,"column":40},"action":"remove","lines":["A"]},{"start":{"row":11,"column":38},"end":{"row":11,"column":39},"action":"remove","lines":["_"]},{"start":{"row":11,"column":37},"end":{"row":11,"column":38},"action":"remove","lines":["I"]},{"start":{"row":11,"column":36},"end":{"row":11,"column":37},"action":"remove","lines":["A"]},{"start":{"row":11,"column":35},"end":{"row":11,"column":36},"action":"remove","lines":["N"]},{"start":{"row":11,"column":34},"end":{"row":11,"column":35},"action":"remove","lines":["E"]},{"start":{"row":11,"column":33},"end":{"row":11,"column":34},"action":"remove","lines":["P"]},{"start":{"row":11,"column":32},"end":{"row":11,"column":33},"action":"remove","lines":["O"]}],[{"start":{"row":11,"column":32},"end":{"row":11,"column":83},"action":"insert","lines":["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"],"id":39}],[{"start":{"row":2,"column":9},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":40}],[{"start":{"row":2,"column":9},"end":{"row":3,"column":0},"action":"remove","lines":["",""],"id":41}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":42}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":30},"action":"insert","lines":["from pydantic import BaseModel"],"id":43}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["",""],"id":44},{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":15},"action":"insert","lines":["class Prompt(BaseModel):","    prompt: str"],"id":45}],[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"remove","lines":["",""],"id":46}],[{"start":{"row":14,"column":40},"end":{"row":14,"column":41},"action":"insert","lines":["d"],"id":47}],[{"start":{"row":14,"column":40},"end":{"row":14,"column":41},"action":"remove","lines":["d"],"id":48}],[{"start":{"row":15,"column":32},"end":{"row":15,"column":83},"action":"remove","lines":["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"],"id":49}],[{"start":{"row":15,"column":32},"end":{"row":15,"column":83},"action":"insert","lines":["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"],"id":50}],[{"start":{"row":15,"column":33},"end":{"row":15,"column":83},"action":"remove","lines":["k-YdV7yqVDYD6zCeWclLTzT3BlbkFJnaTksPtQ387mf7r35Ao3"],"id":51},{"start":{"row":15,"column":32},"end":{"row":15,"column":33},"action":"remove","lines":["s"]}],[{"start":{"row":15,"column":32},"end":{"row":15,"column":83},"action":"insert","lines":["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"],"id":52}]]},"ace":{"folds":[],"scrolltop":240,"scrollleft":0,"selection":{"start":{"row":33,"column":0},"end":{"row":33,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":12,"state":"start","mode":"ace/mode/python"}},"timestamp":1690166205167,"hash":"b31f2b12b546ef87012c2fcdefd40ce07dc5294b"}