<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>회원정보관리페이지</title>
</head>
<link type="text/css" rel="stylesheet" href="member.css" />

<body>
    <h3>회원정보관리페이지</h3>
    <hr />
    <form action="/insert" target="targetURL" name="userForm" method="post">
        <p>Userid : <input type="text" size="15" name="id" /></p>
        <p>Password : <input type="password" size="15" name="pw" /></p>
        <input type="button" value="고객리스트" onclick='document.targetURL.location.href="/select"' />&nbsp;&nbsp;
        <input type="button" value="고객조회"
            onclick='document.targetURL.location.href="/selectQuery?id="+document.userForm.id.value' />&nbsp;&nbsp;
        <input type="submit" value="고객등록" />&nbsp;&nbsp;
        <button type="submit" formaction="/update">고객업데이트</button>&nbsp;
        <button type="submit" formaction="/delete">고객삭제</button>
    </form>

    <script>
        function getParameter(name) {     // http://192.168.1.13:8000/member.html?id=admin -> admin
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null
                ? ""
                : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        function sessionStore() {
            let id = getParameter("id");        // getParameter() -> let id =  admin
            let now = new Date();               // new Date() ->     let now = 현재 날짜 
            if (!window.sessionStorage) {       //브라우저에 저장 한도가 초과할 경우와 쿠키 비활성화 상태일 경우
                alert("세션 스토리지를 지원하지 않습니다.");
                return;
            }
            if (id == "") {
                alert("잘못된 접근입니다.")
                location.href = "index.html";
                sessionStorage.removeItem("")
            } else {
                alert(`사용자 ${id} 가 로그인 하셨습니다.`);
                sessionStorage.setItem(id, now)  // key = id , value = now
            }
        }

        function logout() {
            if (confirm("로그아웃 하시겠습니까?")) {
                let id = getParameter("id");
                sessionStorage.removeItem(id);
                location.href = "/index.html";
            }
        }

    </script>

    <body onload="sessionStore()">

        <hr />

    </body>

</html>